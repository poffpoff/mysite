<!DOCTYPE HTML>
<html>
  <head>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://www.webglearth.com/v2/api.js"></script>
    <script>
      function initialize() {
        $.getJSON('/schedule/events.map.json', function (data) {
          $.each(data, function(i, item){
                var marker = WE.marker([ item.lat ,  item.long ]).addTo(earth);
                marker .bindPopup("<b>" + item.text1 + "</b><br>" + item.text2 + "<br /><span style='font-size:10px;color:#999'>" + item.text3 + "</span>", {maxWidth: 150, closeButton: true}).openPopup();
              });
          });
        }

     function update() {
        $.getJSON('/schedule/events.map.update.json', function (data) {
         var earth = WE.map('earth_div');

          $.each(data, function(i, item){
                      var marker = WE.marker([ item.lat ,  item.long ]).addTo(earth);
                      marker .bindPopup("<b>" + item.text1 + "</b><br>" + item.text2 + "<br /><span style='font-size:10px;color:#999'>" + item.text3 + "</span>", {maxWidth: 150, closeButton: true}).openPopup();
                  });
          });
        }

    </script>
    <style>
      html, body{padding: 0; margin: 0; background-color: black;}
      #earth_div{top: 0; right: 0; bottom: 0; left: 0; position: absolute !important;}
    </style>
    <title>WebGL Earth API: Markers</title>
  </head>
  <body onload="initialize()">
    <div id="earth_div"></div>
  </body>
</html>